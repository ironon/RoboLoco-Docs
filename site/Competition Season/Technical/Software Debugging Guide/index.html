<!doctype html>
<html lang="en">

<head>
    <title>Software Debugging Guide - RoboLoco Docs</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://roboloco.org/Competition%20Season/Technical/Software%20Debugging%20Guide/"> 
    <meta name="author" content="David Macpherson">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../assets/css/darcula-highlight.min.css">

    <link rel="stylesheet" href="../../../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/css/dracula-ui.min.css">
    <link rel="stylesheet" href="../../../assets/css/mkdocs.min.css"> 
    <link rel="icon" type="image/x-icon" href="../../../assets/img/favicon.ico"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>

</head>

<body class="drac-bg-black-secondary drac-text-grey-ternary drac-text drac-scrollbar-purple">

    <main class="d-flex">

        <!-- block sidebar --> <nav id="sidebar" class="sidebar roboloco-dark-green">
    <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="btn btn-primary">
            <i class="fa fa-bars"></i>
            <span class="sr-only">Menu</span>
        </button>
    </div>

    <div class="p-4">
        
        <img class="logo" src="/assets/img/roboloco.png" height="150px"> 

        <div class="drac-text-center">
            
            <span class="drac-text drac-line-height drac-text-white">RoboLoco Docs</span> 
        </div>

        <!-- <div class="drac-box flex-column">
            <ul class="dot-ul">
                <li><div class="dot-li drac-bg-cyan"></div></li>
                <li><div class="dot-li drac-bg-green"></div></li>
                <li><div class="dot-li drac-bg-orange"></div></li>
                <li><div class="dot-li drac-bg-pink"></div></li>
                <li><div class="dot-li drac-bg-purple"></div></li>
                <li><div class="dot-li drac-bg-red"></div></li>
                <li><div class="dot-li drac-bg-yellow"></div></li>
            </ul>
        </div> -->

        <hr class="drac-divider" />

        <!-- block menu -->
        <ul class="mb-5 drac-list drac-list-none">
            
            <li class="drac-box">
                <a href="../../.."
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Home
                </a>
            </li>
            <li class="drac-box">
                <a href="../../../Progress/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Daily Progress
                </a>
            </li>
            <li class="drac-box">
                <a href="../../../software/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Software
                </a>
            </li>
            <li class="drac-box">
                <a href="../../../mechanical/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Mechanical
                </a>
            </li>
            <li class="drac-box">
                <a href="../../../creative/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Creative
                </a>
            </li>
            <li class="drac-box">
                <a href="../../../business/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Business
                </a>
            </li>
        </ul>
        <!-- endblock -->
    </div>
</nav>
        <!-- endblock -->

        <nav class="divider roboloco-blue"></nav>

        <div class="content">
            <!-- block header --> <header>
    <nav class="navbar navbar-expand-xl roboloco-blue-cyan">
        <div class="container-fluid">

            <button class="navbar-toggler w-100 text-center" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu" aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
                <ul class="navbar-nav text-md-center">

                    <!-- block preview -->
                    <li class="nav-item"> 
                    </li>
                    <!--  endblock -->

                    <!-- block search -->
                    <li class="nav-item"><div role="search" class="search-box">
	<form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
		<input type="text" name="q" class="drac-input drac-input-search drac-input-white drac-text-white drac-bg-black-secondary"
		placeholder="Search docs" title="Type search term here" />
	</form>
</div>
                    </li>
                    <!--  endblock -->

                    <!-- block source -->
                    <li class="nav-item">
                          
                    </li>
                    <!--  endblock -->

                </ul>
            </div>

        </div>
    </nav>
</header>
            <!-- endblock -->

            <!-- block content --> <section class="p-md-5 section-content">
    <article>
        <p><p>Software Debugging Guide</p>
<p>We’re having so many freaking problems in making the robot work that we should probably document them.</p>
<ul>
<li>Tele-op drift</li>
</ul>
<h2 id="issues">Issues<a class="headerlink" href="#issues" title="Permanent link">&para;</a></h2>
<ol>
<li>Be careful to not collect too little data, or SysID will not work.</li>
<li>If the auto doesn’t drive straight, it’s hard to fix this. You should probably fix the auto, but it’s possible to align the robot so it gets the data before it drives off the carpet.</li>
<li>Make sure to actually implement SysID logging in code, logging is not automatic.</li>
<li>Doesn’t drive straight</li>
<li>You should probably tune your PID values</li>
<li><a href="#h.gzimm45b3v6q">What if my PID values seem to have zero effect on robot drift?</a></li>
</ol>
<h2 id="robot-drift-caused-without-pid">Robot Drift Caused Without PID?<a class="headerlink" href="#robot-drift-caused-without-pid" title="Permanent link">&para;</a></h2>
<p>5/11/2024</p>
<p>Had a weekend meeting today and spent a good 4 hours trying to figure out a simple question: why is the robot not driving straight?</p>
<p>At first, we believed it was PID values. We adjusted the Proportional term in turning PID to a value of 1, which hypothetically, should mean the robot should zigzag around the desired angle, as it violently oscillates around the setpoint. We tried this today, to zero effect, the behavior was the exact same as before. A bit later, we identified the issue that we believe was causing this, which is that rotational PID sets its setpoint to what it is currently at. Essentially, the input will take in a xspeed, y speed, and rotation. It converts these to be speeds to be delivered to the robot, a translation and rotation speed. When the turning motors of the robot don’t have to move to satisfy this, the PID sets the setpoint to be the current position. This means that if the wheels have drifted, the PID doesn’t prevent this, but reinforces it, allowing the drift to continue.</p>
<p>We operated under this theory for the entire meeting today, and tried a bunch of different things to address it:</p>
<h4 id="if-the-user-is-not-rotating-the-robot-set-the-setpoint-for-turning-to-the-last-setpoint">If the user is not rotating the robot, set the setpoint for turning to the last setpoint<a class="headerlink" href="#if-the-user-is-not-rotating-the-robot-set-the-setpoint-for-turning-to-the-last-setpoint" title="Permanent link">&para;</a></h4>
<p>The idea behind this was that by setting the rotational setpoint to what it was previously every time .drive() was called, it would fix our issue, as long as the user hasn’t rotated the robot since then. Didn’t work because the wheels can rotate without one explicitly using the rotation stick. (If you’re facing forward and try to go 90 deg right, the wheels need to rotate, and this doesn’t account for that). In retrospect yes this was a silly idea.</p>
<h4 id="randomly-set-the-rotation-setpoint-to-100-or-100-so-the-average-is-zero">Randomly set the rotation setpoint to -100 or 100, so the average is zero.<a class="headerlink" href="#randomly-set-the-rotation-setpoint-to-100-or-100-so-the-average-is-zero" title="Permanent link">&para;</a></h4>
<p>What the frick was the point of this idea? How did we greenlight this? It made sense at the time, I promise (Rohit).</p>
<p>(it was really funny so it was totally worth it)</p>
<h4 id="figure-out-the-math-to-make-idea-1-work-current-theory">Figure out the math to make idea #1 work (current theory)<a class="headerlink" href="#figure-out-the-math-to-make-idea-1-work-current-theory" title="Permanent link">&para;</a></h4>
<p>Our condition for setting the setpoint to what it was previously was exclusively based off the rotation stick, the right stick, this approach would use math and stuff to figure out what inputs would change the rotation of the wheels, and depending on whether the current input would change the rotation of the wheels or not, do method #1. </p>
<p><a href="https://www.google.com/url?q=https://www.chiefdelphi.com/t/rotational-drift-when-trying-to-drive-in-a-straight-line/455761/2&amp;sa=D&amp;source=editors&amp;ust=1717314662129182&amp;usg=AOvVaw1uiGEBx3u3PMpAeUkBxAtM">https://www.chiefdelphi.com/t/rotational-drift-when-trying-to-drive-in-a-straight-line/455761/2</a></p>
<p>They have the same issue.</p></p>
    </article>
</section>
            <!-- endblock -->

            <!-- block footer --> <footer>
    <!-- <div class="d-flex flex-sm-row justify-content-between py-2 border-top drac-text-black drac-bg-cyan-green">
        <a href="https://github.com/dracula/mkdocs" target="_blank" style="padding-left: 1%;"
            class="footer-text drac-anchor drac-text-black drac-text-purple--hover">
            Made with Dracula Theme for MkDocs
        </a>
    </div> -->
</footer>
            <!-- endblock -->
        </div>

    </main>

    <script>
        var base_url = '../../..';
    </script>
    <script src="../../../assets/js/jquery-3.3.1.slim.min.js"></script>
    <script src="../../../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../../../assets/js/mkdocs.js"></script>
    <script src="../../../search/main.js" defer></script>

</body>

</html>